"use strict";var StackExchangeDevStory;!function(){var e=function(e,t,n,i){if(e.length){var a=StackOverflow.Models.Story.UserStoryItemTypeId[n.attr("data-typeid")];if(void 0==a)return;e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){var o=e.closest("form");e.closest(".coverable-input.input-loader").addClass("loading"),$.ajax({"type":"POST","url":"/users/story/"+StackExchange.user.options.userId+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":a}}).done(function(a){var r=e.closest(".autocomplete");r.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var s=$(a).insertAfter(e).on("click",".autocomplete-suggestion, .autocomplete-default",function(e){var a=$(e.currentTarget);if(a.hasClass("autocomplete-default"))return o.find(t).focus(),!1;var r=a.data("list-id"),s=a.find(".autocomplete-suggestion-match").text(),c=a.find(".autocomplete-suggestion-image [data-url]").data("url"),l=a.find(".autocomplete-suggestion-url").text();return i&&i(n,{"name":s,"imageUrl":c,"url":l,"listId":r}),o.find(t).focus(),!1});e.is(":focus")||s.hide()})}})}},t=(function(){function e(){this._newItems=null,this._addItemIsVisible=!1,this._editStarted=!1,this._loadingForm=!1,this._mustUse=$(".additem-body").length>0}return Object.defineProperty(e.prototype,"mustUse",{"get":function(){return this._mustUse},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"isAddingItem",{"get":function(){return this._addItemIsVisible},"enumerable":!0,"configurable":!0}),e.prototype.afterSaveOrCancel=function(){this.mustUse&&this._hideAddItemForm()},e.prototype._hideAddItemForm=function(){$("#add-new-item-form").html("").css({"margin-top":"","left":""}).removeClass("with-upper-arrow").addClass("empty-add-new-item-form"),$("#page-cover").hide(),$(".tooltip").show(),this._clickedButton.css({"background":"","z-index":"initial"}),this._addItemIsVisible=!1},e.prototype.init=function(){var e=this;if(this.mustUse){var t=function(t){return e._addItemIsVisible&&!e._editStarted&&e._hideAddItemForm(),t.preventDefault(),!1};$("#page-cover").on("click",function(e){return t(e)}),$("#add-new-item-form").on("click",function(e){return"add-new-item-form"===e.target.id?t(e):!0}),$("#show-more-item-types-button").on("click",function(){$("#more-add-item-buttons").show()}),this._addItem=$(".additem-body"),$(document).keyup(function(t){e._addItemIsVisible&&(27!==t.keyCode||e._editStarted?e._editStarted=!0:e._hideAddItemForm())}),$(document).on("click",".additem-body .-item",function(t){if("show-more-item-types-button"===t.target.closest("li").id)return $(".initially-hidden").css("visibility","visible"),$("#show-more-item-types-button").hide(),void 0;if(e._addItemIsVisible)return e._hideAddItemForm(),void 0;if(!e._loadingForm){var n=$(t.target.closest(".-item")).attr("data-add-item-link");n&&(e._loadingForm=!0,$.ajax(n).done(function(n){e._loadingForm=!1;var i=$(n);i.addClass("nopseudos"),$("#page-cover").show(),$("#add-new-item-form").append(i).addClass("with-upper-arrow").css("z-index","1000");var a=$(t.target).closest(".-item"),o=$("#item-add");e._clickedButton=a;var r,s,c=$("#item-add").css("background-color"),l=a.position().top-58,u=$("#add-item-buttons-container").width()/2;a.position().left+a.width()<u?(r=a.position().left,s=a.width()/2):(r=a.position().left+a.width()-o.outerWidth(),s=o.outerWidth()-a.width()/2),$("#add-new-item-form").append("<style>#add-new-item-form::before{ border-bottom-color: "+c+"; left:"+s+"px}</style>").removeClass("empty-add-new-item-form"),$("#add-new-item-form .timeline-item").css({"border":"0"}),$("#add-new-item-form").css({"margin-top":l,"left":r}),$(".tooltip").hide(),a.css({"background":"white","z-index":1e3}),$(".item-cancel-button").on("click",function(t){return t.preventDefault(),e._hideAddItemForm(),!1}),e._addItemIsVisible=!0,e._editStarted=!1}))}})}},e}(),!1);StackExchange.user.initTimeline=function(){if(!t){t=!0,$(document).on("click",".timeline form :submit, .job-requirements-form :submit",function(e){$(e.target).data("clicked",!0)}),$(document).on("submit",".timeline form, .job-requirements-form",function(e){var t=$(e.target);t.find(":submit[name][value]").each(function(e,n){var i=$(n);if(i.data("clicked")){i.data("clicked",null);var a=t.find('input[name="'+i.attr("name")+'"]').not(":submit");a.length||(a=$("<input>").attr({"type":"hidden","name":i.attr("name")}).addClass("js-submit").appendTo(t)),a.val(i.attr("value"))}})});var n=function(e){$(".description-expander",e).parent().each(function(e,t){var n=$(t),i=n.find(".description-expander"),a=n.find(".description-content-truncated"),o=n.find(".description-content-full"),r=i.is(":checked")?o:a,s=a.data("max-height")||parseInt(a.css("max-height"));a.data("max-height",s);var c=o.attr("style");o.css({"visbility":"hidden","display":"block"});var l=o.outerHeight(!1);if(o.attr("style",c?c:""),l>s){var u=r.children();u=u.add(u.find("a, b, i, strong, em, li"));for(var d=Math.min(s,$(u[0]).outerHeight(!1)),p=r.offset().top,f=1;f<u.length;f++){var h=$(u[f]),m=h.offset().top-p,g=h.outerHeight(!1),v=m+g;s>v&&(d=Math.max(d,v))}a.css("max-height",d+"px")}s>l?n.removeClass("description-ellipsis"):n.addClass("description-ellipsis")})};n(),$(document).on("click",".timeline .feature-banner .js-toggle",function(e){e.preventDefault();var t=$(e.target);$(".js-toggable",t.closest(".feature-banner")).toggleClass("_hidden")}),$(document).on("click",".js-add-assessment",function(e){e.preventDefault(),$("html,body").animate({"scrollTop":$(".item-add").offset().top-20}),$(".item-add.assessment input").click()});var i=function(){$.ajax({"url":"/users/story/edit/"+StackExchange.user.options.userId+"/header/featured-assessments","type":"GET","dataType":"html"}).success(function(e){$(".js-featured-assessments").html(e)})},a=function(){var e,t,n=null,i=function(e,i,a){n=$(e).children(".list-card"),n.css({"display":"flex","left":i,"top":a}),t=!0,$(n).hover(function(){n.stop(!0,!0).css("display","flex")},function(){n.css("display","none"),t=!1})};$(document).on("mouseenter",".js-listcard-hover",function(n){var a=n.currentTarget,o=a.offsetParent.offsetWidth,r=a.offsetLeft/o*100+"%",s=a.offsetParent.offsetHeight,c=a.offsetTop/s*100+"%",l=$(a).attr("data-list-url"),u=$(a).closest(".timeline-item-content").children(".js-listcard-container:first");0===$(u).children().length?setTimeout(function(){e=l,$.ajax({"url":l,"type":"GET","dataType":"html"}).success(function(n){$(u).html(n),t||e!==l||i(u,r,c)})},0):i(u,r,c)}),$(document).on("mouseleave",".js-listcard-hover",function(){$(n).delay(100).fadeOut("fast"),t=!1})};a();var o=function(t){if(!t.data("initialized")){t.data("initialized",!0);var i=t.find(".js-tag-editor");i.length&&StackExchange.using("tagEditor",function(){i.each(function(e,t){StackExchange.tagEditor($(t),null,void 0,{"excerpts":!1,"tagMenus":!0,"multiLine":$(t).hasClass("multi-line")})})});var a=t.find(".autocomplete .autocomplete-input");e(a,"input[name='Title']",t,c),a.length&&t.find(".company-tag .delete-tag").click(function(e){$(e.currentTarget).closest(".input-cover").remove(),t.find("input[name='Company'], input[name='Url'], input[name='LogoUrl'], input[name='School'], input[name='ImageUrl']").prop("disabled",!1).eq(0).focus(),t.find("input[name='ListId']").remove(),t.find(".img.logo").removeClass("disabled").addClass("js-img-edit"),t.find(".img .remove").removeClass("dno").addClass("js-img-remove")});var o=t.filter("#form-section-PersonalInfo");if(o.length){var r=!0,s=$(".privacy-helper").data("is-public");o.find(".privacy-wrapper").each(function(e,t){var n=$(t),i=n.find(".privacy-checkbox"),a=i.find("input:checkbox"),o=i.data("target-id"),c=n.find("#"+o),l=!1;a.is(":checked")||(l=!0,r=!1);var u=function(){r&&s||(l=!0,i.show())},d=function(){i.hide()};n.on("focusout",function(){window.setTimeout(function(){$(document.activeElement).closest(n).length||d()},2)}),c.on("keydown",function(){return u()}).on("focus",function(){l&&u()})})}var l=o.find("#form-section-PersonalInfo-Location");if(l.length){var u=t.find("#form-section-PersonalInfo-LocationPlaceId");if(l.typeWatch({"wait":0,"callback":function(){u.val("")},"highlight":!1,"captureLength":-1}),google&&google.maps){var d=new google.maps.places.Autocomplete(l[0],{"types":["geocode"]});d.addListener("place_changed",function(){u.val("G:"+d.getPlace().place_id)})}}var p=t.find(".textarea-with-counter textarea");p.length&&p.each(function(e,t){var n=$(t);n.charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":n.closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var t=n.next(".-counter");t.toggleClass("-success",e),t.toggleClass("-fail",!e),t.find(".-counter-span").toggleClass("dno",e),t.find(".-success-span").toggleClass("dno",!e)}}),n.val()&&n.trigger("charCounterUpdate")}),n(t)}};$(".timeline-item, .header-edit-section").each(function(e,t){o($(t))});var r=function(e,t){var n;if(e&&null!=(n=t.data("order-by"))){for(var i=e.siblings().filter("[data-order-by]").toArray(),a=null,r=0;r<i.length;r++){var s=$(i[r]);if(s.data("order-by")<n){a=s;break}}a?t.insertBefore(a):t.appendTo(".timeline-feed")}else e?t.insertBefore(e):t.insertBefore(".timeline-feed .timeline-item:first");if(e){var c=e.data("next-focus");if(!c){var l=e.find("input:focus");l.length&&(c=l.attr("name"))}c&&t.find("input[name='"+c+"']").focus(),e.remove()}o(t)},s={"get":function(e){"#"!==e.charAt(0)&&(e="#"+e);var t=this[e];return t||(window.location.href="/users/story/"+StackExchange.user.options.userId+"#item-add"),delete this[e],t.find(".js-loader").removeClass("loading"),t},"put":function(e){if(e){var t="#"+e.attr("id");this[t]=e}}},c=function(e,t){var n=h($(e).find(".js-img-edit"));if(t.imageUrl?n.setImage(t.imageUrl):n.empty(),$(e).find("input[name='Url']").val(t.url),$(e).find("input[name='Company']").val(t.name),$(e).find("input[name='School']").val(t.name),t.listId){var i=$(e).closest("form"),a=$("<input type='hidden' name='ListId' />").val(t.listId),o=$("<input type='hidden' name='ListClicked' />").val("true");i.find("input[name='ListId']").remove().end().append(a).find("input[name='ListClicked']").remove().end().append(o),i.submit()}$(e).data("next-focus","Title")},l=function(e){var t=$(e).parent().find("[name='Company']").val(),n=$(e).closest("form");$.ajax({"type":"POST","url":"/users/story/"+StackExchange.user.options.userId+"/suggest-company-lists","data":{"name":t,"fkey":StackExchange.options.user.fkey,"itemType":StackOverflow.Models.Story.UserStoryItemTypeId.Job}}).done(function(t){$(t).insertAfter(e).on("click",".list-suggestion",function(e){var t=$(e.currentTarget),i=t.data("list-id"),a=t.find("list-suggestion-match").text(),o=t.find(".list-suggestion-image [data-image-url]").data("image-url"),r=t.find("list-suggestion-item [data-url]").data("url");return c(t,{"name":a,"imageUrl":o,"url":r,"listId":i}),n.find("input[name='Title']").focus(),!1}),n.on("keydown","input[name='Company']",function(){$(e).next().is(".message.incomplete.block")&&$(e).next().remove()})})},u=function(e){e.preventDefault();var t,n=$(e.target);if(n.attr("data-adds-item")){t=$("#item-add"),t.length||(t=null);var i=s.get("#item-add");t&&i&&(t.replaceWith(i),t=i)}else t=n.closest(".timeline-item");s.put(t),d(n).done(function(e){var i=$(e);i.find(".js-list-suggestion-container").length&&l(i.find(".js-list-suggestion-container")),r(t,i),n.attr("data-scroll-to")&&i[0].scrollIntoView(!0)})},d=function(e){var t="submitting";return e.hasClass(t)?$.Deferred().promise():(e.addClass(t),$.ajax({"type":e.attr("method")||"GET","url":e.attr("action")||e.attr("href"),"data":e.is("form")?e.serialize():null}).always(function(){e.removeClass(t),e.find(".js-submit").remove(),e.find(".js-loader").removeClass("loading")}))};$(document).on("click",".js-loader",function(e){$(e.target).closest(".js-loader").addClass("loading")}),$(document).on("click",".timeline .timeline-item .item-edit-button a",u),$(document).on("click",".timeline .timeline-item.placeholder a.js-add-link",u),$(document).on("submit",".timeline .timeline-item.add form",u),$(document).on("click",".timeline .timeline-item a.item-cancel-button",function(e){var t=e.target,n=$(t),i=n.closest(".timeline-item"),a=s.get(t.hash);a&&(r(i,a),e.preventDefault())}),$(document).on("click",".js-og-request",function(e){e.preventDefault();var t=$.trim($("input[name=Url]").val()),n=$(e.currentTarget).closest("form");if(!t.length)return n.submit();/^https?:/.test(t)||(t="http://"+t);var i=p(t,n),a=i.fail(function(){var e=t.replace("http://","https://");return p(e,n)});a.then(function(e){$(n).find(".js-og-title").val(e.hybridGraph.title),$(n).find(".js-og-image-url").val(e.hybridGraph.image),$(n).find(".js-og-description").val(e.hybridGraph.description),$(n).submit()},function(){$(n).submit()})});var p=function(e){var t="https://opengraph.io/api/1.0/site/"+encodeURIComponent(e)+"?app_id="+StackExchange.settings.userProfile.openGraphAPIKey;return $.ajax({"dataType":"json","url":t}).then(function(e){return e.error?$.Deferred().reject(new Error(e.error)):e})};$(document).on("submit",".timeline .timeline-item.edit form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".timeline-item"),i=n.is("#item-add"),a=$(e.target);d(a).done(function(e){var t=$(e);i&&!t.is("#item-add")&&s.get("#item-add").insertBefore(n),r(n,t),b(t)})}),$(document).on("submit",".timeline .timeline-item .item-delete-button form",function(e){e.preventDefault();var t=$(e.target);t.closest(".timeline-item").find(".timeline-item-warning").css("display","flex")}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-warning",function(e){$(e.currentTarget).closest(".timeline-item-warning").hide()}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-confirm",function(e){var t=$(e.currentTarget).closest(".timeline-item").find(".item-delete-button form");d(t).done(function(){var e=t.closest(".timeline-item");e.fadeOutAndRemove(),b(e),e.hasClass("assessment")&&i()})}),$(document).on("change","input[type=checkbox][data-current-for]",function(e){var t=$(e.target),n=$("#"+t.data("current-for"));n.prop("disabled",t.is(":checked")?"disabled":null),n.is("fieldset")&&n.find("select,input").prop("disabled",t.is(":checked")?"disabled":null)});var f=function(e){var t=$(e.target).closest(".autocomplete").find(".autocomplete-suggestions-list").show();$(".autocomplete-suggestions-list").not(t).hide()};$(document).on("click","body",f),$(document).on("focus","body",f),$(document).on("keydown",".autocomplete",function(e){switch(e.which){case 27:var t=$(e.target).closest(".autocomplete");t.find(".autocomplete-suggestions-list").remove(),t.find(".autocomplete-input").focus()}});var h=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),a={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&a.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e){e?(n.val(e),i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):a.empty()}};return a};$(document).on("click",".timeline .js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=h(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()});var m=function(e,t){e.preventDefault();var n=$(e.target),i=n.closest(".header-edit-section");s.put(i),d(n).done(function(e){var n=$(e);n.insertAfter(i),i.remove(),t&&n.find(t).focus(),o(n)})};$(document).on("click","a.header-edit-btn-ajax",m),$(document).on("click",".header-edit-section-open a.header-cancel",function(e){var t=$(e.target),n=t.closest(".header-edit-section"),i=s.get(n.attr("id"));i&&(e.preventDefault(),i.insertAfter(n),n.remove())}),$(document).on("submit",".header-edit-section-open form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".header-edit-section"),i=$(e.target);d(i).done(function(e){var t=$(e);t.insertAfter(n),n.remove(),b(t),o(t)})});var g=function(){var e=null,t=function(e){e.removeClass("sticky").removeClass("sticky-bottom")},n=function(){if(e){var n=$(window).scrollTop();n>e.top()?(e.target.addClass("sticky"),n>e.bottom()?e.target.addClass("sticky-bottom"):e.target.removeClass("sticky-bottom")):(t(e.target),e.updateTop())}},i=function(){var n,i,a,o=$(".job-requirements-form"),r=$(".timeline-wrapper"),s=$(".timeline-sidebar"),c=o.add(s);if(s.length){if(s.is(":empty"))return s.remove(),void 0;t(c),o.length&&r.length?(i=o.outerHeight(!0),e={"top":function(){return n},"bottom":function(){var e=r.outerHeight(!0),t=a+e;return t-i},"updateTop":function(){a=r.offset().top,n=o.offset().top},"target":c},e.updateTop()):e=null}};return $(window).on("scroll resize load",n),i}();g(),$(".js-jobs-recommendations").on("recommendations-updated",g);var v=function(e){e=$(e);var t=$(".timeline-sidebar");t.length&&t.remove(),t=$(".timeline-wrapper"),e.appendTo(t),g(),e.find(".job-requirements").is(".js-complete")?$(".timeline").removeClass("requirements-for-jobs"):$(".timeline").addClass("requirements-for-jobs")};$(document).on("submit",".job-requirements-form",function(e){e.preventDefault();var t=$(e.target);d(t).done(v)}),$(document).on("click",".job-requirements .js-min-complete-list a.js-requirement",function(e){var t=$(e.target).closest("a"),n=$(t.attr("data-target")),i=t.data("category"),a=t.data("search-status");if(i&&StackExchange.using("gps",function(){StackExchange.gps.track("min-complete-prompt.click",{"Item":i,"Status":a})}),n.length){$("html,body").animate({"scrollTop":n.offset().top-20});var o=t[0].hash,r=n.find(".header-edit-btn-ajax");if(n.is("#item-add"))if("Assessment"===i)n.find(".assessment input").click();else{var s=n.find(t.attr("data-update-trigger"));s.removeClass("blink"),window.setTimeout(function(){s.addClass("blink")},0)}else"Experience"===i?$(n).find(".item-edit-button a").click():r.length?(e.target=r[0],m(e,o)):n.find(o).focus();e.preventDefault()}});var b=function(e){{var t=!1;$(".job-requirements .js-min-complete-list a[data-update-trigger]").each(function(n,i){t=t||e.is($(i).attr("data-update-trigger"))})}t&&$(".job-requirements-form").submit()},x=function(e){return $.ajax({"type":"POST","url":"/users/story/toggle-min-complete-sidebar/"+StackExchange.user.options.userId,"data":{"fkey":StackExchange.options.user.fkey,"hideCompleted":e}})};$(document).on("click",".js-toggle-completed-requirements",function(){var e=$(".js-toggle-completed-requirements").hasClass("is-visible");x(e).always(function(){$(".js-requirement.is-finished").closest("li").toggleClass("dno"),$(".js-toggle-completed-requirements").toggleClass("is-visible is-hidden").text(e?"Show completed":"Hide completed")})}),$(document).on("submit",".js-onboarding-complete",function(e){e.preventDefault();var t=$(e.target);d(t).done(function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=$("#"+t),i=$(e[t]);i.is(".timeline-sidebar")?v(i):r(n,i)}})}),$(document).on("click",".tag-wrapper .js-tag-toggle",function(e){e.preventDefault();var t=$(e.currentTarget);t.closest(".tag-wrapper-item").find(".more").toggleClass("dno"),t.text("more"===t.text()?"fewer":"more")}),$(document).on("submit","form.import-careers-cv-form",function(){return confirm("This will erase your existing Developer Story and recreate it based on your Careers CV. Continue?")})}};var n=!1;StackExchange.user.initOnboarding=function(t){if(!n){n=!0;var i={},a=(t.searchStatus,t.userId),o=function(e){if(!i[e]){var t=$(e);StackExchange.using("tagEditor",function(){initTagRenderer([""],[""]),StackExchange.tagEditor(t,void 0,void 0,{"multiLine":t.hasClass("multiline"),"suggestionsWidth":466}),i[e]=!0})}};$(".js-like").is(":visible")&&o(".js-like");var r=function(e){return $.ajax({"type":"POST","url":"/users/story/dismissonboarding/"+a,"data":{"fkey":StackExchange.options.user.fkey,"step":e}})},s=function(e){return function(){var t=$(".js-onboarding-complete");t.submit(),e&&$(".js-onboarding").remove()}},c=function(e,t){for(var n=0;n<t.length;n++)e.find(".js-error-"+t[n]).show(),e.find("label[for="+t[n]+"]").closest(".input-group").addClass("has-error"),$(".js-onboarding").on("keydown",":input",function(e){$(e.currentTarget).closest(".input-group").removeClass("has-error").find(".js-error").hide()})},l=function(e,t){var n=$(e);if($(".input-group").removeClass("has-error"),$(".js-error").hide(),n.closest(".step").toggleClass("hidden"),$(".hero-step-counter > .completed").toggleClass("hidden"),$(".hero-step-counter > .js-inactive").toggleClass("hidden"),t){$(".js-onboarding .js-step-2").toggleClass("hidden");var i=$('.js-onboarding-work-education input[type="radio"]:checked').data("wrapper-id");d(i)}else $(".js-onboarding .js-step-1").toggleClass("hidden")},u=function(e,t){var n,i=$(e),o=$(".js-onboarding");if(t){var r=$("input[name=add-xp]:checked").attr("id");n=$("#"+r+"-form")}else n=$("#step1form");return $.ajax({"type":"POST","url":"/users/story/"+a+"/onboarding/save","data":n.serialize()}).done(function(e){e.ModelErrors?(c(o,e.ModelErrors),t&&(i.removeClass("loading"),e.JobStoryItemId&&$("#JobStoryItemId").val(e.JobStoryItemId),e.EducationStoryItemId&&$("#EducationStoryItemId").val(e.EducationStoryItemId))):t?(StackExchange.ga.trackFormInputs(n),n.submit()):(StackExchange.ga.trackFormInputs(n),l(i,!0)),t||i.removeClass("loading")})},d=function(t){if("work-experience-wrapper"===t){o(".js-work-tags");var n=$(".autocomplete .js-company-autocomplete"),i=$("input[name='Tags']").next().find("input");e(n,i,n,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='CompanyId']").val(t.companyId),$("input[name='ListId']").val(t.listId)})}else o(".js-school-tags")};$(".js-onboarding a.button, .js-onboarding a.btn-confirm").not(".js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("loading");var n=!!t.data("save-first-item");u(t,n).always(function(){n||s()})}),$(".js-onboarding a.js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);l(t,!1)}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"not-looking"===t.attr("id")?(n.find(".is-required").hide(),n.find(".js-job-recommendations input").prop("checked",!1)):(n.find(".is-required").show(),n.find(".js-job-recommendations input").prop("checked",!0))}),$("#search-status-menu").on("change",function(e){var t=$(e.target);"not-looking"===t.children(":selected").attr("id")?$(".js-onboarding").find(".is-required").hide():$(".js-onboarding").find(".is-required").show()}),$(".js-onboarding .hero-dismiss").on("click",function(e){$(".hero-step-counter").remove(),r($(e.currentTarget).closest(".step").data("step")).always(s(!0))}),$(".js-current-position, .js-current-education").on("click",function(e){var t=$(e.currentTarget),n=t.parent().prev(".js-enddate-select");n.prop("disabled",t.is(":checked"))}),$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),d(t)}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)}})})}};var i=!1;StackExchange.user.initJobsOnboarding=function(){function e(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t?decodeURIComponent(t[1].replace(/\+/g," ")):null}if(!i){i=!0;var t=function(){var e=$(".js-location"),t=$(".js-location-place-id");if(e.length>0){var n=e[0],i={"types":["geocode"]};if(google&&google.maps){var a=new google.maps.places.Autocomplete(n,i);a.addListener("place_changed",function(){t.val("G:"+a.getPlace().place_id)})}e.typeWatch({"wait":10,"callback":function(){t.val("")},"highlight":!1,"captureLength":-1})}},n=function(e){StackExchange.tagEditor(e,void 0,void 0,{"multiLine":!0});var t=e.parent().find("div.tag-editor");e.hasClass("error")&&t.addClass("error"),t.find('input[type="text"]').on("focus",function(){t.addClass("focus"),t.removeClass("hover")}),t.find('input[type="text"]').on("focusout",function(){t.removeClass("focus")}),t.on("mouseenter",function(){t.hasClass("focus")||t.addClass("hover")}),t.on("mouseleave",function(){t.removeClass("hover")})},a=function(){StackExchange.using("tagEditor",function(){initTagRenderer("@Tag.RequiredTagsList(Current.Site).AsJavascriptString()".split(" "),"@Tag.ModeratorOnlyTagsList.AsJavascriptString()".split(" ")),$(".js-tags-liked:visible").length>0&&n($(".js-tags-liked")),$(".js-work-tags:visible").length>0&&n($(".js-work-tags")),$(".js-education-tags:visible").length>0&&n($(".js-education-tags"))})},o=function(e,t,n){e.length&&e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){e.closest(".coverable-input.input-loader").addClass("loading");var i=$("#min-ds-form").data("user-id");$.ajax({"type":"POST","url":"/users/story/"+i+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":StackOverflow.Models.Story.UserStoryItemTypeId.Job}}).done(function(i){var a=e.closest(".autocomplete");a.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var o=$(i).insertAfter(e);$(".autocomplete-suggestion, .autocomplete-default").on("click",function(e){var i=$(e.currentTarget);if(i.hasClass("autocomplete-default"))return o.hide(),!1;var a=i.data("list-id"),r=i.find(".autocomplete-suggestion-match").text(),s=i.find(".autocomplete-suggestion-image [data-url]").data("url"),c=i.find(".autocomplete-suggestion-url").text();return n&&n(t,{"name":r,"imageUrl":s,"url":c,"listId":a}),o.hide(),!1}),e.is(":focus")||o.hide()})}})},r=function(){var e=$(".autocomplete .js-company-autocomplete");o(e,e,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='ListId']").val(t.listId)})},s=function(){t(),a()},c=function(e,n,i){e.fadeOut("fast",function(){n.fadeIn("slow",function(){i?f($("#user-story-item-type").val()===$("#education-item").val()):(t(),a())})})},l=function(e,t){$(".input-group").removeClass("has-error"),$("div.tag-editor").removeClass("error"),$(".js-error").hide(),e.prop("disabled",!0),$(".js-step-counter .step.completed").toggleClass("hidden"),$(".js-step-counter .step.js-inactive").toggleClass("hidden"),$(".js-step-one").is(":visible")?c($(".js-step-one"),$(".js-step-two"),t):$(".js-step-two").is(":visible")&&c($(".js-step-two"),$(".js-step-one"),t),e.prop("disabled",!1)},u=function(e,t,n,i){for(var a="ResumeUploaderModel",o=0;o<t.length;o++)if(0!=t[o].indexOf(a))e.find(".js-error-"+t[o]).show(),e.find("label[for="+t[o]+"]").closest(".input-group").addClass("has-error"),("LikedTags"===t[o]||"JobTags"===t[o]||"Tags"===t[o]||"EducationTags"===t[o])&&e.find("label[for="+t[o]+"]").parent().find("div.tag-editor").addClass("error");else{var r=t[o].substr(a.length+1);$(".resume-error").html(r).show()}$(".js-onboarding").off("input",":input"),$(".js-onboarding").on("input",":input",function(e){if(!i&&n){var t=$(e.currentTarget),a=t.closest(".js-education-wrapper, .js-work-experience-wrapper");a.find('input[type="text"]:not(.tag-editor), textarea').toArray().every(function(e){return""==$(e).val()})&&(a.find(".input-group").removeClass("has-error").find(".js-error").hide(),a.find(".input-group").find("div.tag-editor").removeClass("error"))}}),$(".js-onboarding").off("keydown",":input"),$(".js-onboarding").on("keydown",":input",function(e){var t=$(e.currentTarget).closest(".input-group");t.hasClass("js-tags")&&t.find("div.tag-editor").removeClass("error"),t.removeClass("has-error").find(".js-error").hide()}),$(".js-onboarding").off("click","select"),$(".js-onboarding").on("click","select",function(e){var t=$(e.currentTarget).closest(".input-group");t.removeClass("has-error").find(".js-error").hide()})},d=function(t,n){var i=$("#min-ds-form"),a=$("#min-ds-form").data("user-id"),o=null;return $(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!0):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!0),o=i.serialize(),$(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!1):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!1),t.addClass("loading"),$(".resume-error").html(null).hide(),$.ajax({"type":"POST","url":"/users/story/"+a+"/onboarding/save","data":o}).done(function(a){if(a.ModelErrors||(StackExchange.ga.trackFormInputs(i),n||StackExchange.ga.trackElement(i)),n)a.ModelErrors?u(i,a.ModelErrors,a.HasSavedResume,n):(void 0!==a.HasSavedResume&&$(".min-ds-content").toggleClass("has-saved-resume",a.HasSavedResume),l(t,!0));else{var o=!1;if(a.ModelErrors&&(u(i,a.ModelErrors,a.HasSavedResume,n),o=!0),a.JobStoryItemId&&$("#JobStoryItemId").val(a.JobStoryItemId),a.EducationStoryItemId&&$("#EducationStoryItemId").val(a.EducationStoryItemId),!o){var r=e("returnUrl");r?window.location.replace(r):a.redirectUrl&&window.location.replace(a.redirectUrl)}}t.removeClass("loading")})},p=function(e){e.trigger("keyup")},f=function(e){e?($("#user-story-item-type").val($("#education-item").val()),$(".js-onboarding-work-education #add-education").prop("checked",!0),$(".js-onboarding-work-education #add-work").prop("checked",!1),p($(".js-education-wrapper .textarea-with-counter textarea"))):($("#user-story-item-type").val($("#job-item").val()),$(".js-onboarding-work-education #add-work").prop("checked",!0),$(".js-onboarding-work-education #add-education").prop("checked",!1),p($(".js-work-experience-wrapper .textarea-with-counter textarea")),r()),a()},h=function(){$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),"work-experience-wrapper"===t?f(!1):f(!0)}),$("#wizard-previous-btn").on("click",function(e){return l($(e.currentTarget),!1),!1}),$("#wizard-next-btn").on("click",function(e){return d($(e.currentTarget),!0),!1}),$("#wizard-done-btn").on("click",function(e){return d($(e.currentTarget),!1),!1}),$(".js-work-is-current, .js-education-is-current").on("click",function(e){var t=$(e.target),n=t.is(".js-work-is-current")?$(".js-work-end-year"):$(".js-education-end-year");t.is(":checked")?n.prop("disabled",!0):n.prop("disabled",!1)}),$(".js-work-end-year, .js-education-end-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-end-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-end-year")?$(".js-work-end-year"):$(".js-education-end-year"),a=parseInt(n.val(),10),o=parseInt(i.val(),10);a>o&&n.val(o)}),$(".js-work-start-year, .js-education-start-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-start-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-start-year")?$(".js-work-end-year"):$(".js-education-end-year");if(i.length>0){var a=parseInt(n.val(),10),o=parseInt(i.val(),10);a>o&&o>0&&i.val(a)}}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)
}})}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"SearchState-NotLooking"===t.attr("id")?n.find(".js-job-recommendations input").prop("checked",!1):n.find(".js-job-recommendations input").prop("checked",!0)}),f($("#user-story-item-type").val()===$("#education-item").val())};s(),h()}},StackExchange.user.handleListImageError=function(e){$(e).parent("div").hide().prev(".js-logo-blank").css("display","flex");var t=$(e).data("list-id");return t?$.ajax({"type":"POST","url":"/users/story/lists/enqueue-for-logo-update","data":{"fkey":StackExchange.options.user.fkey,"listId":t}}):void 0};var a=!1;StackExchange.user.initJobSearchPreferences=function(){function e(e,t){StackExchange.helpers.showMobileMessage(e,t),$("body").scrollIntoView()}if(!a){a=!0,StackExchange.using("tagEditor",function(){var e={"multiLine":!0,"suggestionsWidth":StackExchange.options.isMobile?null:466};StackExchange.tagEditor($("#technologies-like"),null,null,e),StackExchange.tagEditor($("#technologies-dislike"),null,null,e)});var t=$("#location-widget"),n=$("#location-items"),i=$("#location-address"),o=$("#location-place-id"),r=$("#location-add"),s=$("#location-home-item"),c=$("#location-include-home"),l=$("#geo-tag-template").html(),u=n.data("initial")||[],d=$("input[name='SearchStatus']"),p=$(".js-salary"),f=$(".js-more"),h=$("#notify-container");p.keydown(function(e){return e.key&&1===e.key.length&&!/[0-9]/.test(e.key)?!1:void 0}),c.change(function(e){$(e.currentTarget).is(":checked")?s.removeClass("dno"):s.addClass("dno")});var m=function(){n.find(".geo-tag").not(s).remove();for(var e=0;e<u.length;e++){var t=u[e],i=$.extend({"i":e,"NeedsVisaClass":t.NeedsVisa?"needs-visa":""},t);$(l.formatUnicorn(i)).appendTo(n)}};if(n.on("click",".delete-location",function(e){e.preventDefault();var t=$(e.target).closest(".geo-tag[data-index]");t.length&&1===u.splice(t.data("index"),1).length&&m()}),r.click(function(e){e.preventDefault();var n={};t.find("[data-property]").each(function(e,t){var i=$(t);n[i.data("property")]=i.is("input[type=checkbox]")?i.is(":checked"):i.val(),i.val("").prop("checked",!1)}),u.push(n),m(),r.prop("disabled",!0)}),i.typeWatch({"wait":10,"callback":function(){o.val(""),r.prop("disabled",!0)},"highlight":!1,"captureLength":-1}),google&&google.maps){var g=new google.maps.places.Autocomplete(i[0],{"types":["geocode"]});g.addListener("place_changed",function(){var e=g.getPlace().address_components.reduce(function(e,t){return{"types":e.types.concat(t.types)}}).types;e.indexOf("country")>=0&&(o.val("G:"+g.getPlace().place_id),r.prop("disabled",!1))})}var v=function(e,t){e=e.chosen(t);var n=function(t){var n=e.data("name");if(n){e.next().find(".search-choice-close").removeClass("search-choice-close").addClass("delete-tag");var i=e.parent();i.find('[name^="{0}["]'.formatUnicorn(n)).remove();var a=e.val()||[];$.each(a,function(e){$("<input>").attr({"type":"hidden","name":"{0}[{1}]".formatUnicorn(n,e),"value":a[e]}).appendTo(i)}),t===!0&&StackExchange.ga.recordInputChange(e)}};e.change(function(){return n(!0)}),n()};v($("#developer-roles"),{"max_selected_options":StackExchange.options.jobPreferences.maxNumDeveloperRoles}),v($("#industries"),{"max_selected_options":StackExchange.options.jobPreferences.maxNumIndustries}),d.on("change",function(){d.each(function(e,t){var n=$(t),i=n.parent("label").siblings(".opt-in-message");n.is(":checked")?i.css("visibility","visible"):i.css("visibility","hidden")})});var b=function(e,t){e.siblings(".tag-editor").toggleClass("has-error",t),e.siblings(".error-message").toggle(t)},x={"technologies-like":StackExchange.options.story.likedTagsMaxLength,"technologies-dislike":StackExchange.options.story.dislikedTagsMaxLength};$("#technologies-like, #technologies-dislike").on("keydown keyup change paste",function(e){var t=$(e.target);b(t,t.val().length>x[t.attr("id")])});var y=$("form#jobPreferencesForm");y.on("submit",function(t){t.preventDefault(),h.html("");var n=y.serialize();return StackExchange.helpers.addSpinner($("#spinnerContainer")),$.ajax({"type":"POST","url":y.attr("action"),"data":n}).done(function(){var t=d.filter(":checked"),n=!t.data("was-checked");n&&StackExchange.ga.track("Account Management","Job Search Status Change Save",t.data("label")),StackExchange.options.isMobile?e("<b>Success!</b> Your Job Preferences have been saved.","success"):window.location.href=window.location.href}).fail(function(t){if(400===t.status){var n=t.responseJSON;if(n.industriesTooLong||n.developerRolesTooLong){var i=n.industriesTooLong?"Add up to "+StackExchange.options.jobPreferences.maxNumIndustries+" industries only":"Add up to "+StackExchange.options.jobPreferences.maxNumDeveloperRoles+" roles only";if(StackExchange.options.isMobile)e(i,"warning");else{var a={"type":"error","position":"toast","transient":!0,"transientDuration":4e3};StackExchange.helpers.showMessage($("body"),i,a)}return}n.likedTagsTooLong&&b($("#technologies-like"),!0),n.dislikedTagsTooLong&&b($("#technologies-dislike"),!0),null!=n.savedResumeError&&n.savedResumeError.length>0?($(".resume-error").html(n.savedResumeError).show(),$(".resume-uploader").scrollIntoView()):$("#tags").scrollIntoView()}else StackExchange.options.isMobile?e("Sorry, something went wrong","error"):$("#save-error-message").show().scrollIntoView()}).always(function(){StackExchange.helpers.removeSpinner()}),!1}),$(".js-save-job-preferences").click(function(){y.submit()}),f.click(function(){var e=$(this),t=e.siblings(".-more-item"),n=t.first(),i=!n.hasClass("dno");if(i){var a=e.offset().top-n.offset().top,o=$("body").scrollTop()-a;$("body").scrollTop(o)}return t.toggleClass("dno"),e.html(i?"+ More":"- Less"),!1})}};var o=function(e){return e.is(":visible")?e.css("display","none"):e.css("display","inline-flex"),e},r=!1;StackExchange.user.initCvView=function(){if(!r){r=!0;var e=function(){$(".js-cv-story").on("click",".js-toggle-more",function(){var e=$(this),i=e.prevAll(".hidden");t(i);var a=e.closest("section, .section, .js-subsection");n(a)})},t=function(e,t){o(e),e.toggleClass("unhidden",t)},n=function(e){var t=e.find(".js-toggle-more");if(0!=t.length){var n=e.find(".hidden"),i=t.html(),a=t.data("fewer-text"),o=t.data("more-text");t.html(n.filter(":hidden").length?i.replace(a,o):i.replace(o,a))}};e()}},StackExchange.user.initListEditor=function(){var e=$("a.js-edit-list"),t=$("header.js-edit-list"),n=$("form.js-delete-list"),i=t.prev("header");e.click(function(e){e.preventDefault(),t.removeClass("hidden"),i.addClass("hidden")}),n.submit(function(e){e.preventDefault();var t=$(e.currentTarget);confirm("Are you sure you want to delete this list?")&&$.ajax({"type":"POST","url":t.attr("action"),"data":t.serialize()}).done(function(e){e.success&&$("#content").prepend(e.message)})});var a=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),a={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&a.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e){e?(n.val(e),i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):a.empty()}};return a};t.on("click",".js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=a(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()}),$(".js-cancel-edit").click(function(e){e.preventDefault(),t.addClass("hidden"),i.removeClass("hidden")})};var s=!1;StackExchange.user.initJobRecommendations=function(e){if(!s){s=!0;var t=function(){$.ajax({"type":"POST","url":"/users/story/fetch-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"source":e,"fkey":StackExchange.options.user.fkey}}).done(function(e){var t=$(".js-jobs-recommendations");t.append(e),StackExchange.ga.bindHandlers(t),t.trigger("recommendations-updated")})},n=function(e){return $.ajax({"type":"POST","url":"/users/story/toggle-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"fkey":StackExchange.options.user.fkey,"collapseJobs":e}})};$(document).on("click",".js-toggle-jobs",function(){var e=$(".js-sidebar-jobs-visible").hasClass("is-visible");n(e).always(function(){$(".js-sidebar-jobs-visible, .js-sidebar-jobs-hidden").toggleClass("is-visible is-hidden")})}),$(document).on("click",".js-jobs-recommendations a",function(t){var n=$(t.target).closest(".js-click-target"),i=n.data("target");StackExchange.using("gps",function(){StackExchange.gps.track("story_sidebar.jobs_recommendations.click",{"target":i,"source":e})})}),t()}};var c=!1;StackExchange.user.initResumeUploader=function(e){if(!c){c=!0;try{l.init(e)}catch(t){$("#uploader-wrapper .loading-text").html("Loading failed.")}}};var l;!function(e){function t(e){function t(){null!==m&&(clearTimeout(m),m=null)}function n(e,n){$("input[name='HasSavedResume']").val("True"),$("input[name='SavedResumeId']").val(e).trigger("change"),$(".saved-resume-filename").text(n),$(".upload-complete").fadeIn(100),t(),m=setTimeout(function(){$(".upload-complete").fadeOut(),t()},15e3),i(e,n),$(".resume-uploader").addClass("has-resume")}function i(e,t){$(".download-saved-resume").attr("href","/jobs/resume/download?savedResumeId="+e).attr("download",t).show()}function a(e){switch(e){case 0:return"GoogleDrive";case 1:return"Dropbox";default:return"None"}}function o(e){switch(e){case 0:return 1;case 1:return 2;default:throw"Invalid external resume source"}}function r(e){s(e)}function s(e){var t=a(e.source);$(".uploading-filename").text(e.displayName),$(".resume-error").html(null).hide(),$(".uploading-text").html("Fetching from "+t),g.addClass("is-fetching-external-resume"),$.post("/jobs/resume/fetch-from-external-source",{"fkey":StackExchange.options.user.fkey,"Source":o(e.source),"Location":e.location,"AuthToken":e.authToken,"Filename":e.displayName}).then(function(e){g.removeClass("is-fetching-external-resume"),e.Success?n(e.SavedResumeId,e.Filename):$(".resume-error").html(e.ErrorMessage).show()},function(){g.removeClass("is-fetching-external-resume"),$(".resume-error").html("An unknown error occurred").show()})}function c(e){var t="There was an error.";e&&("string"==typeof e?t=e:e instanceof Error&&(t=e.message)),$(".resume-error").text(t).show()}function l(t){return new Promise(function(n,i){switch(t){case 0:window.gapi.auth.authorize({"client_id":e.googleDrive.clientId,"scope":["https://www.googleapis.com/auth/drive.readonly"],"immediate":!1},function(t){if(t&&!t.error){var a=Math.min(Math.max(window.innerWidth,350),650),o=Math.min(Math.max(window.innerHeight,566),1051),r=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.PDFS).setOAuthToken(t.access_token).setAppId(e.googleDrive.appId).setSize(a,o).setDeveloperKey(e.googleDrive.developerKey).setCallback(function(e){u(e,t.access_token).then(n,i)}).build();r.setVisible(!0)}});break;case 1:Dropbox.choose({"success":function(e){d(e).then(n,i)},"linkType":"direct","extensions":[".pdf",".doc",".docx",".odt",".txt"]})}})}function u(e,t){return new Promise(function(n){if(e&&e[google.picker.Response.ACTION]===google.picker.Action.PICKED){var i=e[google.picker.Response.DOCUMENTS][0];if(i){var a=i[google.picker.Document.ID],o=i[google.picker.Document.MIME_TYPE],r=i[google.picker.Document.NAME];"application/vnd.google-apps.document"===o&&(r+=".pdf"),n({"source":0,"location":a,"authToken":t,"displayName":r})}}})}function d(t){return new Promise(function(n,i){if(t.length>0){var a=t[0];a.bytes>e.maxResumeUploadSize?i(new Error("Resume file is too large. Please limit resume to "+e.maxResumeUploadSize+" bytes.")):n({"source":1,"location":a.link,"displayName":a.name})}})}var p=document.getElementById("uploader-wrapper");if(null!==p){var f="";window.Dropbox&&Dropbox.isBrowserSupported()?(f='<a href="#" class="js-dropbox-trigger">Dropbox</a>',$("#uploader-wrapper").on("click",".js-dropbox-trigger",function(e){e.preventDefault(),l(1).then(r,c)})):$("button.js-dropbox-trigger").hide();var h="";window.gapi?(h='<a href="#" class="js-google-drive-trigger">Google Drive</a>',window.gapi.load("auth",function(){}),window.gapi.load("picker",function(){}),$("#uploader-wrapper").on("click",".js-google-drive-trigger",function(e){e.preventDefault(),l(0).then(r,c)})):$("button.js-google-drive-trigger").hide();var m=null,g=$(".resume-uploader");if(!StackExchange.options.isMobile){{new qq.FineUploader({"element":p,"multiple":!1,"request":{"endpoint":"/jobs/resume/upload","params":{"fkey":StackExchange.options.user.fkey}},"text":{"fileInputTitle":""},"validation":{"allowedExtensions":e.allowedFileExtensions,"sizeLimit":e.maxResumeUploadSize},"callbacks":{"onTotalProgress":function(e,t){var n=Math.floor(100*e/t);n=Math.min(n,100),100==n?($(".uploading-text").html("Scanning for viruses"),g.removeClass("is-uploading"),g.addClass("is-virus-scanning")):$(".uploading-text").html(n+"% Complete")},"onValidate":function(e){var t=window.qq.Promise,n=new t;return/[\/\\:\*\?"<>\|]/.test(e.name)?($(".resume-error").html("The file name is invalid").show(),n.failure(!1)):n.success(!0),n},"onSubmit":function(e,t){$(".uploading-filename").text(t),$(".uploading-text").html("0% Complete"),$(".resume-error").html(null).hide(),g.addClass("is-uploading")},"onComplete":function(e,t,i){g.removeClass("is-uploading").removeClass("is-virus-scanning"),$(".uploading-text").html(null),i.success?n(i.savedResumeId,i.filename):$(".resume-error").html(i.message).show()},"onError":function(e,t,n){return g.removeClass("is-uploading").removeClass("is-virus-scanning"),$(".uploading-text").html(null),"XHR returned response code 0"==n?($(".resume-error").html("A network error has occurred. Are you connected to the internet?").show(),void 0):(-1==n.indexOf("has an invalid extension.")&&-1==n.indexOf("is too large")&&"XHR returned response code 400"!=n&&alert("Error on file upload: "+n),void 0)}}})}""!==h&&$("#uploader-wrapper .upload-text .js-google-drive-link").html((""===f?" or ":", ")+h),""!==f&&$("#uploader-wrapper .upload-text .js-dropbox-link").html((""===h?" or ":", or ")+f)}$("body").on("click",".js-remove-saved-resume",function(){$("input[name='SavedResumeId']").val(null).trigger("change"),$("input[name='HasSavedResume']").val("False"),$(".resume-error").hide(),$(".resume-uploader").removeClass("has-resume"),$(".upload-complete").hide(),t()})}}var n;!function(e){e[e.GoogleDrive=0]="GoogleDrive",e[e.Dropbox=1]="Dropbox"}(n||(n={})),e.init=t}(l||(l={}))}(StackExchangeDevStory||(StackExchangeDevStory={}));var StackOverflow;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.Job=1]="Job",e[e.PublicArtifact=2]="PublicArtifact",e[e.TopPost=3]="TopPost",e[e.AppsAndSoftware=4]="AppsAndSoftware",e[e.Education=5]="Education",e[e.Certification=6]="Certification",e[e.Generic=10]="Generic",e[e.AutoGenerated=99]="AutoGenerated",e[e.OpenSource=100]="OpenSource",e[e.Reading=200]="Reading"}(t=e.UserStoryItemTypeId||(e.UserStoryItemTypeId={}))}(t=e.Story||(e.Story={}))}(t=e.Models||(e.Models={}))}(StackOverflow||(StackOverflow={}));